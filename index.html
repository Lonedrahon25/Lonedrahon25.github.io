<<<<<<< HEAD:index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowbane Crest Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="page-header">
        <h1><img src="hurlbatlogohd.png" style="vertical-align:middle; height:30px;">Shadowbane Crest Generator<img src="hurlbatlogohd.png" style="vertical-align:middle; height:30px;"></h1>
    </header>

    <main class="container">
        <section class="crest-display">
            <div id="crest" class="crest-preview">
                <img src="bg.png" id="background" class="crest-image background">
                <img src="patterns/0.png" id="pattern" class="crest-image pattern">
                <img src="icons/0.png" id="icon" class="crest-image icon">
            </div>
        </section>

        <section class="controls">
            <div class="control-group">
                <label for="bc">Background Color:</label>
                <select id="bc">
                    <option value="0" selected>Light Green</option>
                    <option value="1">Green</option>
                    <option value="2">Dark Green</option>
                    <option value="3">Light Blue</option>
                    <option value="4">Blue</option>
                    <option value="5">Dark Blue</option>
                    <option value="6">Purple</option>
                    <option value="7">Dark Red</option>
                    <option value="8">Red</option>
                    <option value="9">Orange</option>
                    <option value="10">Gold</option>
                    <option value="11">Bronze</option>
                    <option value="12">Light Yellow</option>
                    <option value="13">Yellow</option>
                    <option value="14">White</option>
                    <option value="15">Silver</option>
                    <option value="16">Grey</option>
                    <option value="17">Black</option>
                    <option value="18">Turquoise</option>
                </select>
            </div>

            <div class="control-group">
                <label for="pc">Pattern Color:</label>
                <select id="pc">
                    <option value="0" selected>Light Green</option>
                    <option value="1">Green</option>
                    <option value="2">Dark Green</option>
                    <option value="3">Light Blue</option>
                    <option value="4">Blue</option>
                    <option value="5">Dark Blue</option>
                    <option value="6">Purple</option>
                    <option value="7">Dark Red</option>
                    <option value="8">Red</option>
                    <option value="9">Orange</option>
                    <option value="10">Gold</option>
                    <option value="11">Bronze</option>
                    <option value="12">Light Yellow</option>
                    <option value="13">Yellow</option>
                    <option value="14">White</option>
                    <option value="15">Silver</option>
                    <option value="16">Grey</option>
                    <option value="17">Black</option>
                    <option value="18">Turquoise</option>
                </select>
            </div>

            <div class="control-group">
                <label for="ic">Icon Color:</label>
                <select id="ic">
                    <option value="0" selected>Light Green</option>
                    <option value="1">Green</option>
                    <option value="2">Dark Green</option>
                    <option value="3">Light Blue</option>
                    <option value="4">Blue</option>
                    <option value="5">Dark Blue</option>
                    <option value="6">Purple</option>
                    <option value="7">Dark Red</option>
                    <option value="8">Red</option>
                    <option value="9">Orange</option>
                    <option value="10">Gold</option>
                    <option value="11">Bronze</option>
                    <option value="12">Light Yellow</option>
                    <option value="13">Yellow</option>
                    <option value="14">White</option>
                    <option value="15">Silver</option>
                    <option value="16">Grey</option>
                    <option value="17">Black</option>
                    <option value="18">Turquoise</option>
                </select>
            </div>

            <div class="control-group">
                <label for="p">Pattern:</label>
                <select id="p">
                    <option value="0" selected>Checkers</option>
                    <option value="1">Horizontal Bottom</option>
                    <option value="2">Vertical Half</option>
                    <option value="3">Horizontal Line</option>
                    <option value="4">Horizontal Top</option>
                    <option value="5">Vertical Line</option>
                    <option value="6">Diagonal Line</option>
                    <option value="7">Crossroads</option>
                    <option value="8">Trifork</option>
                    <option value="9">Downfork</option>
                    <option value="10">Stalaktite</option>
                    <option value="11">Stalagmite</option>
                    <option value="12">Cross</option>
                    <option value="13">Diagonal Half</option>
                    <option value="14">Diamonds</option>
                </select>
            </div>

            <div class="control-group">
                <label for="i">Icon:</label>
                <select id="i">
                    <option value="0" selected>Barbarian</option>
                    <option value="1">Channeler</option>
                    <option value="2">Crusader</option>
                    <option value="3">Druid</option>
                    <option value="4">Assassin</option>
                    <option value="5">Fury</option>
                    <option value="6">Amazon</option>
                    <option value="7">Confessor</option>
                    <option value="8">Prelate</option>
                    <option value="9">Priest</option>
                    <option value="10">Templar</option>
                    <option value="11">Ranger</option>
                    <option value="12">Scout</option>
                    <option value="13">Bard</option>
                    <option value="14">Rogue</option>
                    <option value="15">Warrior</option>
                    <option value="16">Thaumaturgist</option>
                    <option value="17">Shade</option>
                    <option value="18">Centaur</option>
                    <option value="19">Minotaur</option>
                    <option value="20">Half Giant</option>
                    <option value="21">Irekei</option>
                    <option value="22">Human</option>
                    <option value="23">Aelfborn</option>
                    <option value="24">Elf</option>
                    <option value="25">Spirit</option>
                    <option value="26">Constitution</option>
                    <option value="27">Intelligence</option>
                    <option value="28">Dexterity</option>
                    <option value="29">Strength</option>
                    <option value="30">Warlock</option>
                    <option value="31">Mage</option>
                    <option value="32">Aracoix</option>
                    <option value="33">Dwarf</option>
                    <option value="34">Cresent and Star</option>
                    <option value="35">BullsEye</option>
                    <option value="36">Broken Sword</option>
                    <option value="37">Leg Bones</option>
                    <option value="38">Hammer and Axe</option>
                    <option value="39">Hunting Horn</option>
                    <option value="40">Lion Head</option>
                    <option value="41">Demon Skull</option>
                    <option value="42">Crossed Scimitars</option>
                    <option value="43">Unicorn</option>
                    <option value="44">Circle of Stars</option>
                    <option value="45">Tornado</option>
                    <option value="46">Dragon Claw</option>
                    <option value="47">Skeletal Hand</option>
                    <option value="48">Dragon Rampant</option>
                    <option value="49">Wave</option>
                    <option value="50">Anhk</option>
                    <option value="51">Sea Shell</option>
                    <option value="52">Lion Rampant</option>
                    <option value="53">Lightning Bolt</option>
                    <option value="54">Lightning Strike</option>
                    <option value="55">Serpent Rampant</option>
                    <option value="56">Bear Rampant</option>
                    <option value="57">Diamond</option>
                    <option value="58">Triangle</option>
                    <option value="59">Pyramid</option>
                    <option value="60">Skull</option>
                    <option value="61">Cross</option>
                    <option value="62">Pine Tree</option>
                    <option value="63">Oak Tree</option>
                    <option value="64">Fish</option>
                    <option value="65">Decapitated Head</option>
                    <option value="66">Dagger Down</option>
                    <option value="67">Two Rings Joined</option>
                    <option value="68">All Father Symbol</option>
                    <option value="69">Mask</option>
                    <option value="70">Tankard</option>
                    <option value="71">Owl</option>
                    <option value="72">Unicorn Rampant</option>
                    <option value="73">Eagle Head</option>
                    <option value="74">Wolf Rampant</option>
                    <option value="75">Eagle Rampant</option>
                    <option value="76">Mountain</option>
                    <option value="77">Spiral</option>
                    <option value="78">Crown</option>
                    <option value="79">Crown on sword</option>
                    <option value="80">Two Headed Dragon</option>
                    <option value="81">Sea Serpent</option>
                    <option value="82">Labrys</option>
                    <option value="83">War Axe</option>
                    <option value="84">Boot</option>
                    <option value="85">Horned Helm</option>
                    <option value="86">Crossbow</option>
                    <option value="87">Bow &amp; Arrow</option>
                    <option value="88">Mage Tower</option>
                    <option value="89">Tower</option>
                    <option value="90">Bishop</option>
                    <option value="91">Rook</option>
                    <option value="92">Queen</option>
                    <option value="93">King</option>
                    <option value="94">Knight</option>
                    <option value="95">Gauntlet</option>
                    <option value="96">Candle</option>
                    <option value="97">Book</option>
                    <option value="98">Boar Head</option>
                    <option value="99">Bull Rampant</option>
                    <option value="100">Wheel</option>
                    <option value="101">Celtic Cross</option>
                    <option value="102">Waning Moon</option>
                    <option value="103">Rose</option>
                    <option value="104">Staff</option>
                    <option value="105">Fleur</option>
                    <option value="106">War Hammer</option>
                    <option value="107">Water</option>
                    <option value="108">Air</option>
                    <option value="109">Fire</option>
                    <option value="110">Earth</option>
                    <option value="111">Bat</option>
                    <option value="112">Hour Glass</option>
                    <option value="113">Spider</option>
                    <option value="114">Web</option>
                    <option value="115">Forge</option>
                    <option value="116">Horseshoe</option>
                    <option value="117">Horse Head</option>
                    <option value="118">Infinity Knot</option>
                    <option value="119">Decapitated Monster</option>
                    <option value="120">Hand and Spell</option>
                    <option value="121">Wand</option>
                    <option value="122">Flail</option>
                    <option value="123">Anchor</option>
                    <option value="124">Thorn Crown</option>
                    <option value="125">Scales</option>
                    <option value="126">Flaming Sword</option>
                    <option value="127">Howling Wolf</option>
                    <option value="128">Chaos</option>
                    <option value="129">Hands in Prayer</option>
                    <option value="130">Scroll</option>
                    <option value="131">Two Arrows Cross</option>
                    <option value="132">Feather</option>
                    <option value="133">Lobster</option>
                    <option value="134">Winged Ankh</option>
                    <option value="135">Three Stars</option>
                    <option value="136">Fangs</option>
                    <option value="137">Conch Shell</option>
                    <option value="138">Key</option>
                    <option value="139">Lock</option>
                    <option value="140">Smile</option>
                    <option value="141">Bull Head</option>
                    <option value="142">Sickle</option>
                    <option value="143">Flying Fish</option>
                    <option value="144">Hawk</option>
                    <option value="145">Phoenix Rampant</option>
                    <option value="146">Mace</option>
                    <option value="147">Two Spears Crossed</option>
                    <option value="148">Fist</option>
                    <option value="149">Antlers</option>
                    <option value="150">Crescent Moon</option>
                    <option value="151">Rising Sun</option>
                    <option value="152">Sun</option>
                    <option value="153">Griffon Rampant</option>
                    <option value="154">Sword Turned Down</option>
                    <option value="155">Hand</option>
                    <option value="156">Squid</option>
                    <option value="157">Trident</option>
                    <option value="158">Manacles</option>
                    <option value="159">Noose</option>
                    <option value="160">Ship</option>
                    <option value="161">Diving Eagle</option>
                    <option value="162">Maple Leaf</option>
                    <option value="163">Scimitar</option>
                    <option value="164">Dragon Rearing</option>
                    <option value="165">Pentacle</option>
                    <option value="166">Comet</option>
                    <option value="167">Star</option>
                    <option value="168">Two Swords Down</option>
                    <option value="169">Three Swords Down</option>
                    <option value="170">Skull and Crossbones</option>
                    <option value="171">Serpents Entwined</option>
                    <option value="172">Three Daggers</option>
                    <option value="173">Flaming Fist</option>
                    <option value="174">Flaming Arrow</option>
                    <option value="175">Archaic Sun</option>
                    <option value="176">Claw of Chaos</option>
                    <option value="177">Scourge</option>
                    <option value="178">Chaos Vortex</option>
                    <option value="179">Banelord</option>
                    <option value="180">Morloch</option>
                    <option value="181">Death</option>
                    <option value="182">Doomsayer</option>
                    <option value="183">Sentinel</option>
                </select>
            </div>
        </section>
    </main>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        // Your existing colorData array
        const colorData = [
            { rgb: 'rgb(36, 48, 36)', filter: 'brightness(0.5) sepia(1) hue-rotate(60deg) saturate(3)' },
            { rgb: 'rgb(14, 32, 20)', filter: 'brightness(0.4) sepia(1) hue-rotate(70deg) saturate(6)' },
            { rgb: 'rgb(3, 8, 4)', filter: 'brightness(0.3) sepia(1) hue-rotate(80deg) saturate(9)' },
            { rgb: 'rgb(37, 42, 106)', filter: 'brightness(0.6) sepia(1) hue-rotate(190deg) saturate(5)' },
            { rgb: 'rgb(18, 15, 82)', filter: 'brightness(0.5) sepia(1) hue-rotate(200deg) saturate(8)' },
            { rgb: 'rgb(3, 3, 39)', filter: 'brightness(0.3) sepia(1) hue-rotate(210deg) saturate(9)' },
            { rgb: 'rgb(31, 10, 41)', filter: 'brightness(0.4) sepia(1) hue-rotate(240deg) saturate(7)' },
            { rgb: 'rgb(66, 2, 3)', filter: 'brightness(0.4) sepia(1) hue-rotate(320deg) saturate(8)' },
            { rgb: 'rgb(124, 20, 19)', filter: 'brightness(0.6) sepia(1) hue-rotate(330deg) saturate(6)' },
            { rgb: 'rgb(167, 56, 37)', filter: 'brightness(0.8) sepia(1) hue-rotate(340deg) saturate(4)' },
            { rgb: 'rgb(115, 82, 49)', filter: 'brightness(0.7) sepia(1) hue-rotate(0deg) saturate(4)' },
            { rgb: 'rgb(70, 61, 46)', filter: 'brightness(0.6) sepia(1) hue-rotate(10deg) saturate(3)' },
            { rgb: 'rgb(106, 101, 69)', filter: 'brightness(0.8) sepia(1) hue-rotate(25deg) saturate(3)' },
            { rgb: 'rgb(114, 106, 41)', filter: 'brightness(0.7) sepia(1) hue-rotate(35deg) saturate(5)' },
            { rgb: 'rgb(180, 180, 180)', filter: 'grayscale(1) brightness(1.8)' },
            { rgb: 'rgb(107, 106, 104)', filter: 'grayscale(1) brightness(1.1)' },
            { rgb: 'rgb(49, 49, 49)', filter: 'grayscale(1) brightness(0.5)' },
            { rgb: 'rgb(0, 0, 0)', filter: 'grayscale(1) brightness(0)' },
            { rgb: 'rgb(7, 26, 41)', filter: 'brightness(0.4) sepia(1) hue-rotate(150deg) saturate(8)' }
        ];

        function updateCrest() {
            const bgValue = document.getElementById('bc').value;
            const pcValue = document.getElementById('pc').value;
            const icValue = document.getElementById('ic').value;
            const pValue = document.getElementById('p').value;
            const iValue = document.getElementById('i').value;

            // These references are still useful for general manipulation or if you reintroduce a solid background color
            const crestDiv = document.getElementById('crest');
            const patternImage = document.getElementById('pattern');
            const iconImage = document.getElementById('icon');
            const backgroundImage = document.getElementById('background'); // Get the background image element
            const gameValuesSpan = document.getElementById('gameva');

            // Apply filter to the 'background' image to change its color
            backgroundImage.style.filter = colorData[bgValue].filter;

            patternImage.src = `patterns/${pValue}.png`;
            patternImage.style.filter = colorData[pcValue].filter;

            iconImage.src = `icons/${iValue}.png`;
            iconImage.style.filter = colorData[icValue].filter;

            gameValuesSpan.textContent = `${bgValue}:${pValue}:${pcValue}:${iValue}:${icValue}`;
        }

        // Get all select elements
        const selectElements = document.querySelectorAll('.controls select');
        selectElements.forEach(select => {
            select.addEventListener('change', updateCrest);
        });

        // Function to handle image baking and download
        async function bakeAndDownloadImage() {
            const crestDiv = document.getElementById('crest');

            try {
                // Ensure all images are loaded before attempting to render
                // This is a common pitfall. html2canvas handles it well usually,
                // but explicit preloading might be needed for very slow connections.
                const canvas = await html2canvas(crestDiv, {
                    scale: 2, // Increase resolution for better quality
                    useCORS: true // Important for images loaded from different origins (though less common locally)
                });

                // Convert canvas to image data URL
                const imageDataUrl = canvas.toDataURL('image/png'); // 'image/jpeg' also an option

                // Create a temporary link element
                const downloadLink = document.createElement('a');
                downloadLink.href = imageDataUrl;
                downloadLink.download = 'crest-design.png'; // Suggested filename for download

                // Append to body, click, and remove
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);

            } catch (error) {
                console.error("Error baking image:", error);
                alert("Failed to bake image. Ensure all image files (bg.png, icons, patterns) are correctly placed and accessible. If you're using a web server, check for CORS issues.");
            }
        }

        // Attach event listener to the "Bake Image" button
        document.getElementById('bake').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default link behavior (#)
            bakeAndDownloadImage();
        });

        // Initial update when the page loads
        document.addEventListener('DOMContentLoaded', updateCrest);
    </script>

</body>
</html>
=======
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowbane Crest Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="page-header">
        <h1><img src="hurlbatlogohd.png" style="vertical-align:middle; height:30px;">Shadowbane Crest Generator<img src="hurlbatlogohd.png" style="vertical-align:middle; height:30px;"></h1>
    </header>

    <main class="container">
        <section class="crest-display">
            <div id="crest" class="crest-preview">
                <img src="bg.png" id="background" class="crest-image background">
                <img src="patterns/0.png" id="pattern" class="crest-image pattern">
                <img src="icons/0.png" id="icon" class="crest-image icon">
            </div>
        </section>

        <section class="controls">
            <div class="control-group">
                <label for="bc">Background Color:</label>
                <select id="bc">
                    <option value="0" selected>Light Green</option>
                    <option value="1">Green</option>
                    <option value="2">Dark Green</option>
                    <option value="3">Light Blue</option>
                    <option value="4">Blue</option>
                    <option value="5">Dark Blue</option>
                    <option value="6">Purple</option>
                    <option value="7">Dark Red</option>
                    <option value="8">Red</option>
                    <option value="9">Orange</option>
                    <option value="10">Gold</option>
                    <option value="11">Bronze</option>
                    <option value="12">Light Yellow</option>
                    <option value="13">Yellow</option>
                    <option value="14">White</option>
                    <option value="15">Silver</option>
                    <option value="16">Grey</option>
                    <option value="17">Black</option>
                    <option value="18">Turquoise</option>
                </select>
            </div>

            <div class="control-group">
                <label for="pc">Pattern Color:</label>
                <select id="pc">
                    <option value="0" selected>Light Green</option>
                    <option value="1">Green</option>
                    <option value="2">Dark Green</option>
                    <option value="3">Light Blue</option>
                    <option value="4">Blue</option>
                    <option value="5">Dark Blue</option>
                    <option value="6">Purple</option>
                    <option value="7">Dark Red</option>
                    <option value="8">Red</option>
                    <option value="9">Orange</option>
                    <option value="10">Gold</option>
                    <option value="11">Bronze</option>
                    <option value="12">Light Yellow</option>
                    <option value="13">Yellow</option>
                    <option value="14">White</option>
                    <option value="15">Silver</option>
                    <option value="16">Grey</option>
                    <option value="17">Black</option>
                    <option value="18">Turquoise</option>
                </select>
            </div>

            <div class="control-group">
                <label for="ic">Icon Color:</label>
                <select id="ic">
                    <option value="0" selected>Light Green</option>
                    <option value="1">Green</option>
                    <option value="2">Dark Green</option>
                    <option value="3">Light Blue</option>
                    <option value="4">Blue</option>
                    <option value="5">Dark Blue</option>
                    <option value="6">Purple</option>
                    <option value="7">Dark Red</option>
                    <option value="8">Red</option>
                    <option value="9">Orange</option>
                    <option value="10">Gold</option>
                    <option value="11">Bronze</option>
                    <option value="12">Light Yellow</option>
                    <option value="13">Yellow</option>
                    <option value="14">White</option>
                    <option value="15">Silver</option>
                    <option value="16">Grey</option>
                    <option value="17">Black</option>
                    <option value="18">Turquoise</option>
                </select>
            </div>

            <div class="control-group">
                <label for="p">Pattern:</label>
                <select id="p">
                    <option value="0" selected>Checkers</option>
                    <option value="1">Horizontal Bottom</option>
                    <option value="2">Vertical Half</option>
                    <option value="3">Horizontal Line</option>
                    <option value="4">Horizontal Top</option>
                    <option value="5">Vertical Line</option>
                    <option value="6">Diagonal Line</option>
                    <option value="7">Crossroads</option>
                    <option value="8">Trifork</option>
                    <option value="9">Downfork</option>
                    <option value="10">Stalaktite</option>
                    <option value="11">Stalagmite</option>
                    <option value="12">Cross</option>
                    <option value="13">Diagonal Half</option>
                    <option value="14">Diamonds</option>
                </select>
            </div>

            <div class="control-group">
                <label for="i">Icon:</label>
                <select id="i">
                    <option value="0" selected>Barbarian</option>
                    <option value="1">Channeler</option>
                    <option value="2">Crusader</option>
                    <option value="3">Druid</option>
                    <option value="4">Assassin</option>
                    <option value="5">Fury</option>
                    <option value="6">Amazon</option>
                    <option value="7">Confessor</option>
                    <option value="8">Prelate</option>
                    <option value="9">Priest</option>
                    <option value="10">Templar</option>
                    <option value="11">Ranger</option>
                    <option value="12">Scout</option>
                    <option value="13">Bard</option>
                    <option value="14">Rogue</option>
                    <option value="15">Warrior</option>
                    <option value="16">Thaumaturgist</option>
                    <option value="17">Shade</option>
                    <option value="18">Centaur</option>
                    <option value="19">Minotaur</option>
                    <option value="20">Half Giant</option>
                    <option value="21">Irekei</option>
                    <option value="22">Human</option>
                    <option value="23">Aelfborn</option>
                    <option value="24">Elf</option>
                    <option value="25">Spirit</option>
                    <option value="26">Constitution</option>
                    <option value="27">Intelligence</option>
                    <option value="28">Dexterity</option>
                    <option value="29">Strength</option>
                    <option value="30">Warlock</option>
                    <option value="31">Mage</option>
                    <option value="32">Aracoix</option>
                    <option value="33">Dwarf</option>
                    <option value="34">Cresent and Star</option>
                    <option value="35">BullsEye</option>
                    <option value="36">Broken Sword</option>
                    <option value="37">Leg Bones</option>
                    <option value="38">Hammer and Axe</option>
                    <option value="39">Hunting Horn</option>
                    <option value="40">Lion Head</option>
                    <option value="41">Demon Skull</option>
                    <option value="42">Crossed Scimitars</option>
                    <option value="43">Unicorn</option>
                    <option value="44">Circle of Stars</option>
                    <option value="45">Tornado</option>
                    <option value="46">Dragon Claw</option>
                    <option value="47">Skeletal Hand</option>
                    <option value="48">Dragon Rampant</option>
                    <option value="49">Wave</option>
                    <option value="50">Anhk</option>
                    <option value="51">Sea Shell</option>
                    <option value="52">Lion Rampant</option>
                    <option value="53">Lightning Bolt</option>
                    <option value="54">Lightning Strike</option>
                    <option value="55">Serpent Rampant</option>
                    <option value="56">Bear Rampant</option>
                    <option value="57">Diamond</option>
                    <option value="58">Triangle</option>
                    <option value="59">Pyramid</option>
                    <option value="60">Skull</option>
                    <option value="61">Cross</option>
                    <option value="62">Pine Tree</option>
                    <option value="63">Oak Tree</option>
                    <option value="64">Fish</option>
                    <option value="65">Decapitated Head</option>
                    <option value="66">Dagger Down</option>
                    <option value="67">Two Rings Joined</option>
                    <option value="68">All Father Symbol</option>
                    <option value="69">Mask</option>
                    <option value="70">Tankard</option>
                    <option value="71">Owl</option>
                    <option value="72">Unicorn Rampant</option>
                    <option value="73">Eagle Head</option>
                    <option value="74">Wolf Rampant</option>
                    <option value="75">Eagle Rampant</option>
                    <option value="76">Mountain</option>
                    <option value="77">Spiral</option>
                    <option value="78">Crown</option>
                    <option value="79">Crown on sword</option>
                    <option value="80">Two Headed Dragon</option>
                    <option value="81">Sea Serpent</option>
                    <option value="82">Labrys</option>
                    <option value="83">War Axe</option>
                    <option value="84">Boot</option>
                    <option value="85">Horned Helm</option>
                    <option value="86">Crossbow</option>
                    <option value="87">Bow &amp; Arrow</option>
                    <option value="88">Mage Tower</option>
                    <option value="89">Tower</option>
                    <option value="90">Bishop</option>
                    <option value="91">Rook</option>
                    <option value="92">Queen</option>
                    <option value="93">King</option>
                    <option value="94">Knight</option>
                    <option value="95">Gauntlet</option>
                    <option value="96">Candle</option>
                    <option value="97">Book</option>
                    <option value="98">Boar Head</option>
                    <option value="99">Bull Rampant</option>
                    <option value="100">Wheel</option>
                    <option value="101">Celtic Cross</option>
                    <option value="102">Waning Moon</option>
                    <option value="103">Rose</option>
                    <option value="104">Staff</option>
                    <option value="105">Fleur</option>
                    <option value="106">War Hammer</option>
                    <option value="107">Water</option>
                    <option value="108">Air</option>
                    <option value="109">Fire</option>
                    <option value="110">Earth</option>
                    <option value="111">Bat</option>
                    <option value="112">Hour Glass</option>
                    <option value="113">Spider</option>
                    <option value="114">Web</option>
                    <option value="115">Forge</option>
                    <option value="116">Horseshoe</option>
                    <option value="117">Horse Head</option>
                    <option value="118">Infinity Knot</option>
                    <option value="119">Decapitated Monster</option>
                    <option value="120">Hand and Spell</option>
                    <option value="121">Wand</option>
                    <option value="122">Flail</option>
                    <option value="123">Anchor</option>
                    <option value="124">Thorn Crown</option>
                    <option value="125">Scales</option>
                    <option value="126">Flaming Sword</option>
                    <option value="127">Howling Wolf</option>
                    <option value="128">Chaos</option>
                    <option value="129">Hands in Prayer</option>
                    <option value="130">Scroll</option>
                    <option value="131">Two Arrows Cross</option>
                    <option value="132">Feather</option>
                    <option value="133">Lobster</option>
                    <option value="134">Winged Ankh</option>
                    <option value="135">Three Stars</option>
                    <option value="136">Fangs</option>
                    <option value="137">Conch Shell</option>
                    <option value="138">Key</option>
                    <option value="139">Lock</option>
                    <option value="140">Smile</option>
                    <option value="141">Bull Head</option>
                    <option value="142">Sickle</option>
                    <option value="143">Flying Fish</option>
                    <option value="144">Hawk</option>
                    <option value="145">Phoenix Rampant</option>
                    <option value="146">Mace</option>
                    <option value="147">Two Spears Crossed</option>
                    <option value="148">Fist</option>
                    <option value="149">Antlers</option>
                    <option value="150">Crescent Moon</option>
                    <option value="151">Rising Sun</option>
                    <option value="152">Sun</option>
                    <option value="153">Griffon Rampant</option>
                    <option value="154">Sword Turned Down</option>
                    <option value="155">Hand</option>
                    <option value="156">Squid</option>
                    <option value="157">Trident</option>
                    <option value="158">Manacles</option>
                    <option value="159">Noose</option>
                    <option value="160">Ship</option>
                    <option value="161">Diving Eagle</option>
                    <option value="162">Maple Leaf</option>
                    <option value="163">Scimitar</option>
                    <option value="164">Dragon Rearing</option>
                    <option value="165">Pentacle</option>
                    <option value="166">Comet</option>
                    <option value="167">Star</option>
                    <option value="168">Two Swords Down</option>
                    <option value="169">Three Swords Down</option>
                    <option value="170">Skull and Crossbones</option>
                    <option value="171">Serpents Entwined</option>
                    <option value="172">Three Daggers</option>
                    <option value="173">Flaming Fist</option>
                    <option value="174">Flaming Arrow</option>
                    <option value="175">Archaic Sun</option>
                    <option value="176">Claw of Chaos</option>
                    <option value="177">Scourge</option>
                    <option value="178">Chaos Vortex</option>
                    <option value="179">Banelord</option>
                    <option value="180">Morloch</option>
                    <option value="181">Death</option>
                    <option value="182">Doomsayer</option>
                    <option value="183">Sentinel</option>
                </select>
            </div>
        </section>
    </main>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        // Existing colorData array
        const colorData = [
            { rgb: 'rgb(36, 48, 36)', filter: 'brightness(0.5) sepia(1) hue-rotate(60deg) saturate(3)' },
            { rgb: 'rgb(14, 32, 20)', filter: 'brightness(0.4) sepia(1) hue-rotate(70deg) saturate(6)' },
            { rgb: 'rgb(3, 8, 4)', filter: 'brightness(0.3) sepia(1) hue-rotate(80deg) saturate(9)' },
            { rgb: 'rgb(37, 42, 106)', filter: 'brightness(0.6) sepia(1) hue-rotate(190deg) saturate(5)' },
            { rgb: 'rgb(18, 15, 82)', filter: 'brightness(0.5) sepia(1) hue-rotate(200deg) saturate(8)' },
            { rgb: 'rgb(3, 3, 39)', filter: 'brightness(0.3) sepia(1) hue-rotate(210deg) saturate(9)' },
            { rgb: 'rgb(31, 10, 41)', filter: 'brightness(0.4) sepia(1) hue-rotate(240deg) saturate(7)' },
            { rgb: 'rgb(66, 2, 3)', filter: 'brightness(0.4) sepia(1) hue-rotate(320deg) saturate(8)' },
            { rgb: 'rgb(124, 20, 19)', filter: 'brightness(0.6) sepia(1) hue-rotate(330deg) saturate(6)' },
            { rgb: 'rgb(167, 56, 37)', filter: 'brightness(0.8) sepia(1) hue-rotate(340deg) saturate(4)' },
            { rgb: 'rgb(115, 82, 49)', filter: 'brightness(0.7) sepia(1) hue-rotate(0deg) saturate(4)' },
            { rgb: 'rgb(70, 61, 46)', filter: 'brightness(0.6) sepia(1) hue-rotate(10deg) saturate(3)' },
            { rgb: 'rgb(106, 101, 69)', filter: 'brightness(0.8) sepia(1) hue-rotate(25deg) saturate(3)' },
            { rgb: 'rgb(114, 106, 41)', filter: 'brightness(0.7) sepia(1) hue-rotate(35deg) saturate(5)' },
            { rgb: 'rgb(180, 180, 180)', filter: 'grayscale(1) brightness(1.8)' },
            { rgb: 'rgb(107, 106, 104)', filter: 'grayscale(1) brightness(1.1)' },
            { rgb: 'rgb(49, 49, 49)', filter: 'grayscale(1) brightness(0.5)' },
            { rgb: 'rgb(0, 0, 0)', filter: 'grayscale(1) brightness(0)' },
            { rgb: 'rgb(7, 26, 41)', filter: 'brightness(0.4) sepia(1) hue-rotate(150deg) saturate(8)' }
        ];

        function updateCrest() {
            const bgValue = document.getElementById('bc').value;
            const pcValue = document.getElementById('pc').value;
            const icValue = document.getElementById('ic').value;
            const pValue = document.getElementById('p').value;
            const iValue = document.getElementById('i').value;

            // These references are still useful for general manipulation or if you reintroduce a solid background color
            const crestDiv = document.getElementById('crest');
            const patternImage = document.getElementById('pattern');
            const iconImage = document.getElementById('icon');
            const backgroundImage = document.getElementById('background'); // Get the background image element
            const gameValuesSpan = document.getElementById('gameva');

            // Apply filter to the 'background' image to change its color
            backgroundImage.style.filter = colorData[bgValue].filter;

            patternImage.src = `patterns/${pValue}.png`;
            patternImage.style.filter = colorData[pcValue].filter;

            iconImage.src = `icons/${iValue}.png`;
            iconImage.style.filter = colorData[icValue].filter;

            gameValuesSpan.textContent = `${bgValue}:${pValue}:${pcValue}:${iValue}:${icValue}`;
        }

        // Get all select elements
        const selectElements = document.querySelectorAll('.controls select');
        selectElements.forEach(select => {
            select.addEventListener('change', updateCrest);
        });

        // Function to handle image baking and download
        async function bakeAndDownloadImage() {
            const crestDiv = document.getElementById('crest');

            try {
                // Ensure all images are loaded before attempting to render
                // This is a common pitfall. html2canvas handles it well usually,
                // but explicit preloading might be needed for very slow connections.
                const canvas = await html2canvas(crestDiv, {
                    scale: 2, // Increase resolution for better quality
                    useCORS: true // Important for images loaded from different origins (though less common locally)
                });

                // Convert canvas to image data URL
                const imageDataUrl = canvas.toDataURL('image/png'); // 'image/jpeg' also an option

                // Create a temporary link element
                const downloadLink = document.createElement('a');
                downloadLink.href = imageDataUrl;
                downloadLink.download = 'crest-design.png'; // Suggested filename for download

                // Append to body, click, and remove
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);

            } catch (error) {
                console.error("Error baking image:", error);
                alert("Failed to bake image. Ensure all image files (bg.png, icons, patterns) are correctly placed and accessible. If you're using a web server, check for CORS issues.");
            }
        }

        // Attach event listener to the "Bake Image" button
        document.getElementById('bake').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default link behavior (#)
            bakeAndDownloadImage();
        });

        // Initial update when the page loads
        document.addEventListener('DOMContentLoaded', updateCrest);
    </script>

</body>
</html>
>>>>>>> e10c5793c704c67ba229ec3380d9edb213e18ff8:Shadowbane Crest Generator.html
